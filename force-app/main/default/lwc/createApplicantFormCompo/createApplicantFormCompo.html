<template>
    <lightning-card title="Applicant Form"> 
        <lightning-record-edit-form object-api-name="Applicant__c">
            <lightning-input-field label="Enter First Name" field-name="First_Name__c" onchange={firstNameHandler}></lightning-input-field>
            <lightning-input-field label="Enter Last Name" field-name="Last_Name__c" onchange={lastNameHandler}></lightning-input-field>
            <lightning-input-field label="Enter Email Id" field-name="Email_Id__c" onchange={emailHandler}></lightning-input-field>

                <lightning-button label="Verify Email Id" variant="brand" style="width: 150px;display: inline-block;" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}" onclick={generateOTPHandler} disabled={isButtonDisabled}></lightning-button>

            <template if:true={showOtpMessage}>Email Verified! Please enter the OTP sent to your email.
                <lightning-icon icon-name="action:approval" size="small "></lightning-icon>
                </template>

                <template if:true={showFailEmail}> Invalid Email Id !!! Enter Valid Email Id..
                    <lightning-icon icon-name="action:close" size="small "></lightning-icon>
                </template> 
                <br><span if:true={isButtonDisabled} id="timer">{minutes}:{seconds} remaining</span>
            
                <template if:true={showEnterOTPField}>
                
                <br><lightning-input label="Enter OTP" value={enterOtp} onchange={OtpHandler} style="width: 150px;display: inline-block;" ></lightning-input>
                
                <template if:true={showOTPsucessfullyMessage}>
                    
                    <lightning-icon icon-name="action:approval" size="small "></lightning-icon>
                        </template>

            </template>
            
            <template if:true={showOTPsucessfullyMessage}>
                <div>OTP Verified Successfully. <br><br>
                    
                    <lightning-button label="Submit" onclick={handleSubmit} disabled={isButtonDisabled} loading={isLoading}></lightning-button>
                </div>
            </template>
            <template if:true={errorMessage}>
                <div>
                <p style="color:#ff0000">Enter valid OTP. </p>  
                </div>
            </template>
            

       
        </lightning-record-edit-form>
    </lightning-card>
</template>
